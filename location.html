<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Location - CIMPA School Recife</title>

    <!-- Fonts & Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Leaflet CSS (Map Library) -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />

    <!-- Main Site CSS - Consistent with index.html -->
    <link rel="stylesheet" href="css/styles.css">

    <style>
        /* Location Page Specific Styles */
        .location-header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: var(--white);
            padding: 3rem 1.5rem;
            text-align: center;
        }

        .location-header h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }

        .location-header p {
            font-size: 1.1rem;
            color: rgba(255, 255, 255, 0.9);
            max-width: 800px;
            margin: 0 auto;
        }

        /* Map Container */
        #map {
            height: 60vh;
            min-height: 400px;
            width: 100%;
            border-radius: var(--border-radius-md);
        }

        @media (max-width: 768px) {
            #map {
                height: 50vh;
                min-height: 250px;
            }

            .location-header h1 {
                font-size: 2rem;
            }
        }

        /* Custom Map Icons */
        .custom-icon {
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 50%;
            color: white;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
            border: 2px solid white;
            transition: transform 0.2s;
            font-size: 14px;
        }

        .custom-icon:hover {
            transform: scale(1.1);
            z-index: 1000 !important;
        }

        /* Icon Colors */
        .icon-start {
            background-color: #10B981;
        }

        .icon-end {
            background-color: #EF4444;
        }

        .icon-turn {
            background-color: #F59E0B;
        }

        .icon-gate {
            background-color: #1F2937;
        }

        .icon-bus {
            background-color: #059669;
        }

        .icon-landmark {
            background-color: #3B82F6;
        }

        /* Pulsing User Location Marker */
        .user-location-marker {
            width: 20px;
            height: 20px;
            background-color: #3B82F6;
            border: 3px solid white;
            border-radius: 50%;
            box-shadow: 0 0 0 10px rgba(59, 130, 246, 0.3);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% {
                box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.7);
            }

            70% {
                box-shadow: 0 0 0 10px rgba(59, 130, 246, 0);
            }

            100% {
                box-shadow: 0 0 0 0 rgba(59, 130, 246, 0);
            }
        }

        /* Information Cards */
        .info-card {
            background: var(--white);
            border-radius: var(--border-radius-md);
            padding: 1.5rem;
            box-shadow: var(--shadow-md);
            margin-bottom: 1.5rem;
        }

        .info-card-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1rem;
            padding-bottom: 0.8rem;
            border-bottom: 2px solid var(--gray-medium);
        }

        .info-card-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            flex-shrink: 0;
        }

        .info-card-icon.black {
            background: var(--dark);
            color: var(--white);
        }

        .info-card-icon.green {
            background: #10B981;
            color: var(--white);
        }

        .info-card-icon.blue {
            background: var(--secondary);
            color: var(--white);
        }

        .info-card h3 {
            color: var(--primary);
            font-size: 1.3rem;
            margin: 0;
        }

        .info-highlight {
            background: var(--gray-light);
            padding: 0.8rem;
            border-radius: var(--border-radius-sm);
            margin: 0.5rem 0;
        }

        .info-highlight .label {
            font-size: 0.75rem;
            color: var(--gray-dark);
            text-transform: uppercase;
            font-weight: 700;
            margin-bottom: 0.3rem;
        }

        .info-highlight .value {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-dark);
        }

        .bus-line {
            display: inline-block;
            background: rgba(16, 185, 129, 0.15);
            color: #059669;
            padding: 0.3rem 0.6rem;
            border-radius: 4px;
            font-size: 0.85rem;
            font-weight: 700;
            margin-right: 0.5rem;
        }

        .map-legend {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            justify-content: center;
            padding: 1rem;
            background: var(--gray-light);
            border-radius: var(--border-radius-sm);
            font-size: 0.85rem;
        }

        .map-legend-item {
            display: flex;
            align-items: center;
            gap: 0.4rem;
        }

        .map-legend-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }
    </style>
</head>

<body>

    <!-- HEADER - EXACT COPY FROM INDEX.HTML -->
    <header class="header">
        <nav class="nav-container">
            <a href="index.html" class="logo" id="home-link">
                <div class="logo-container">
                    <span class="star">üåû üáßüá∑</span>
                    <span class="logo-text">CIMPA School Recife</span>
                </div>
            </a>
            <ul class="nav-menu">
                <li><a href="index.html#about" class="nav-link">About</a></li>
                <li><a href="index.html#team" class="nav-link">Team</a></li>
                <li><a href="index.html#courses" class="nav-link">Courses</a></li>
                <li><a href="index.html#research" class="nav-link">Research Talks</a></li>
                <li><a href="index.html#schedule" class="nav-link">Schedule</a></li>
                <li><a href="index.html#practical" class="nav-link">Practical Info</a></li>
                <li><a href="location.html" class="nav-link"
                        style="color: var(--accent); font-weight: 600;">Location</a></li>
                <li><a href="index.html#registration" class="nav-link">Registration</a></li>
                <li><a href="index.html#sponsors" class="nav-link">Sponsors</a></li>
                <li><a href="index.html#contact" class="nav-link">Contact</a></li>
                <li>
                    <a href="https://github.com/orgs/cimpaschoolrecife/repositories" target="_blank"
                        rel="noopener noreferrer" class="nav-link">
                        <img src="https://cdn.jsdelivr.net/npm/simple-icons@v8/icons/github.svg" alt="GitHub"
                            class="github-icon">
                    </a>
                </li>
            </ul>
            <div class="hamburger">‚ò∞</div>
        </nav>
    </header>

    <!-- Location Header Section -->
    <div class="location-header">
        <h1>Venue & Transportation</h1>
        <p>
            The event will take place at the <strong>Biblioteca Setorial (Sectoral Library)</strong> inside the UFRPE
            Campus.
            Here is everything you need to know to get there.
        </p>
    </div>

    <!-- Main Content Section -->
    <section class="section">
        <div
            style="max-width: 1400px; margin: 0 auto; display: grid; grid-template-columns: 1fr 2fr; gap: 2rem; align-items: start;">

            <!-- Left Column: Information Cards -->
            <div>

                <!-- Ride Apps Card -->
                <div class="info-card">
                    <div class="info-card-header">
                        <div class="info-card-icon black">
                            <i class="fas fa-car"></i>
                        </div>
                        <h3>Ride Apps (Uber/99)</h3>
                    </div>
                    <p style="color: var(--gray-dark); margin-bottom: 1rem; font-size: 0.95rem;">
                        The easiest way to arrive. Direct the driver to the specific gate to avoid walking long
                        distances.
                    </p>
                    <div class="info-highlight">
                        <div class="label">Set Destination To:</div>
                        <div class="value">UFRPE - Port√£o Z3</div>
                    </div>
                    <div class="info-highlight">
                        <div class="label">Or Building Name:</div>
                        <div class="value" style="font-size: 0.9rem;">Biblioteca Setorial Manuel Correia de Andrade
                        </div>
                    </div>
                </div>

                <!-- Public Transport Card -->
                <div class="info-card">
                    <div class="info-card-header">
                        <div class="info-card-icon green">
                            <i class="fas fa-bus"></i>
                        </div>
                        <h3>Public Transport</h3>
                    </div>
                    <p style="color: var(--gray-dark); margin-bottom: 1rem; font-size: 0.95rem;">
                        Recife has a comprehensive bus system. Look for lines that stop at <strong>Dois Irm√£os</strong>.
                    </p>
                    <ul class="expertise-list" style="margin: 1rem 0;">
                        <li><span class="bus-line">522</span> <strong>Dois Irm√£os (Rui Barbosa)</strong><br>
                            <span style="font-size: 0.85rem; color: var(--gray-dark);">Passing via Derby/Center</span>
                        </li>
                        <li><span class="bus-line">524</span> <strong>S√≠tio dos Pintos</strong><br>
                            <span style="font-size: 0.85rem; color: var(--gray-dark);">Connects to Av. Caxang√°</span>
                        </li>
                        <li><span class="bus-line">2930</span> <strong>TI Rio Doce / Dois Irm√£os</strong><br>
                            <span style="font-size: 0.85rem; color: var(--gray-dark);">From Olinda side</span>
                        </li>
                    </ul>
                    <div
                        style="padding: 0.8rem; background: rgba(244,158,76,0.1); border-radius: var(--border-radius-sm); font-size: 0.85rem; color: var(--text-dark);">
                        <i class="fas fa-exclamation-triangle" style="color: var(--accent);"></i>
                        <strong>Tip:</strong> Use the <strong>Moovit</strong> or <strong>Cittamobi</strong> apps for
                        real-time bus tracking in Recife.
                    </div>
                </div>

                <!-- Walking Directions Card -->
                <div class="info-card">
                    <div class="info-card-header">
                        <div class="info-card-icon blue">
                            <i class="fas fa-walking"></i>
                        </div>
                        <h3>Walking Directions</h3>
                    </div>
                    <p style="color: var(--gray-dark); margin-bottom: 1rem; font-size: 0.95rem;">
                        Start at <strong>Port√£o Z3 (Gate Z3)</strong>. Follow the signs or the map route to reach the
                        Library
                        easily.
                    </p>
                    <ol style="list-style: decimal; padding-left: 1.5rem; margin: 1rem 0; color: var(--text-dark);">
                        <li style="margin-bottom: 0.5rem;">Start at <strong>Port√£o Z3 (Gate Z3)</strong>.</li>
                        <li style="margin-bottom: 0.5rem;">Turn <strong>Left</strong>.</li>
                        <li style="margin-bottom: 0.5rem;">Walk towards <strong>NUBIOTEC</strong>.</li>
                        <li style="margin-bottom: 0.5rem;">Turn <strong>Right</strong>.</li>
                        <li style="margin-bottom: 0.5rem;">The <strong>Biblioteca Setorial (Sectoral Library)</strong>
                            will be on your right.
                        </li>
                    </ol>
                </div>

            </div>

            <!-- Right Column: Map -->
            <div>
                <div class="card" style="padding: 0; overflow: hidden;">
                    <div
                        style="padding: 1rem; background: var(--gray-light); border-bottom: 1px solid var(--gray-medium); display: flex; justify-content: space-between; align-items: center;">
                        <h3 style="margin: 0; color: var(--primary); font-size: 1.2rem;">
                            <i class="fas fa-map-marked-alt" style="margin-right: 0.5rem;"></i>
                            Campus Map
                        </h3>
                        <button onclick="locateUser()" class="button" style="padding: 0.5rem 1rem; font-size: 0.9rem;">
                            <i class="fas fa-location-arrow" style="margin-right: 0.3rem;"></i> Where am I?
                        </button>
                    </div>

                    <!-- Map Container -->
                    <div id="map"></div>

                    <!-- Map Legend -->
                    <div class="map-legend">
                        <div class="map-legend-item">
                            <div class="map-legend-dot" style="background: #10B981;"></div>
                            <span>Start (Gate Z3)</span>
                        </div>
                        <div class="map-legend-item">
                            <div class="map-legend-dot" style="background: #3B82F6;"></div>
                            <span>Landmarks</span>
                        </div>
                        <div class="map-legend-item">
                            <div class="map-legend-dot" style="background: #EF4444;"></div>
                            <span>Venue</span>
                        </div>
                        <div class="map-legend-item">
                            <div class="map-legend-dot" style="background: #059669;"></div>
                            <span>Bus Stop</span>
                        </div>
                    </div>
                </div>

                <!-- External Link Button -->
                <a href="https://www.google.com/maps/dir/?api=1&destination=Biblioteca+Setorial+Manuel+Correia+de+Andrade,+UFRPE"
                    target="_blank" class="button"
                    style="display: block; text-align: center; margin-top: 1.5rem; padding: 1rem;">
                    <i class="fas fa-external-link-alt" style="margin-right: 0.5rem;"></i>
                    Open in Google Maps App
                </a>
            </div>

        </div>

        <!-- Mobile: Stack vertically -->
        <style>
            @media (max-width: 992px) {
                section.section>div {
                    grid-template-columns: 1fr !important;
                }
            }
        </style>
    </section>

    <!-- Footer -->
    <footer
        style="background: var(--dark); color: var(--text-light); text-align: center; padding: 2.5rem 1.5rem; margin-top: 3rem;">
        <p>¬© 2026 CIMPA School Recife.</p>
        <p style="margin-top: 1rem;">Use the map above for walking directions inside the campus.</p>
    </footer>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

    <!-- Main Site JavaScript - Same as index.html -->
    <script src="js/scripts.js"></script>

    <script>
        // --- MAP CONFIGURATION ---

        const COORDS = {
            // Main Route Points
            START_Z3: [-8.016531, -34.950893],
            TURN_LEFT: [-8.017089, -34.950463],
            NUBIOTEC: [-8.016555, -34.949799],
            TURN_RIGHT: [-8.016410, -34.949666],
            LIBRARY: [-8.016220, -34.949269],

            // References
            GATE_Z1A: [-8.016263, -34.950938],
            BUS_STOP_1: [-8.016354, -34.950686],
            BUS_STOP_2: [-8.016494, -34.951048],
            DEPT_MATH: [-8.016087, -34.951305],
            POOL: [-8.015763, -34.950452]
        };

        // Initialize Map
        const map = L.map('map', { zoomControl: true }).setView([-8.0165, -34.9505], 17);

        // Tile Layer (Clean style)
        L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png', {
            attribution: '&copy; OpenStreetMap contributors',
            maxZoom: 20
        }).addTo(map);

        // Icon Factory
        const createIcon = (iconName, colorClass, size = 32) => {
            return L.divIcon({
                className: 'custom-div-icon',
                html: `<div class="custom-icon ${colorClass}" style="width: ${size}px; height: ${size}px;">
                        <i class="fas ${iconName} text-sm"></i>
                       </div>`,
                iconSize: [size, size],
                iconAnchor: [size / 2, size],
                popupAnchor: [0, -size]
            });
        };

        // Helper to add markers
        function addMarker(coords, icon, title, desc) {
            const marker = L.marker(coords, { icon: icon }).addTo(map);
            marker.bindPopup(`
                <div style="text-align: center;">
                    <strong style="font-size: 0.85rem; text-transform: uppercase; color: #6c757d; display: block; margin-bottom: 0.3rem;">${title}</strong>
                    <span style="color: #212529; font-weight: 600;">${desc}</span>
                </div>
            `);
            return marker;
        }

        // --- ADDING CONTENT ---

        // 1. The Walking Route Markers
        addMarker(COORDS.START_Z3, createIcon('fa-map-pin', 'icon-start', 36), "Start", "Port√£o Z-3 (Gate Z-3)");
        addMarker(COORDS.TURN_LEFT, createIcon('fa-arrow-right', 'icon-turn', 28), "Route", "Turn Left");
        addMarker(COORDS.NUBIOTEC, createIcon('fa-flask', 'icon-turn', 28), "Ref", "NUBIOTEC");
        addMarker(COORDS.TURN_RIGHT, createIcon('fa-arrow-right', 'icon-turn', 28), "Route", "Turn Right");
        const libMarker = addMarker(COORDS.LIBRARY, createIcon('fa-flag-checkered', 'icon-end', 40), "Venue", "Biblioteca Setorial<br><span style='font-size:0.9em'>(Sectoral Library - Main Venue)</span>");

        // Open the Library popup by default after a delay
        setTimeout(() => libMarker.openPopup(), 1000);

        // 2. Reference Markers
        addMarker(COORDS.GATE_Z1A, createIcon('fa-door-open', 'icon-gate', 28), "Gate", "Port√£o Z1-a (Gate Z1-a)");
        addMarker(COORDS.BUS_STOP_1, createIcon('fa-bus', 'icon-bus', 28), "Bus Stop", "Parada de √înibus / Food");
        addMarker(COORDS.BUS_STOP_2, createIcon('fa-bus', 'icon-bus', 28), "Bus Stop", "Parada de √înibus / Food");
        addMarker(COORDS.DEPT_MATH, createIcon('fa-calculator', 'icon-landmark', 28), "Department", "Departamento de Matem√°tica<br><span style='font-size:0.9em'>(Math Department)</span>");
        addMarker(COORDS.POOL, createIcon('fa-swimmer', 'icon-landmark', 28), "Leisure", "Piscina (Pool)");

        // 3. Drawing the Line
        const routePoints = [
            COORDS.START_Z3,
            COORDS.TURN_LEFT,
            COORDS.NUBIOTEC,
            COORDS.TURN_RIGHT,
            COORDS.LIBRARY
        ];

        // White border line
        L.polyline(routePoints, {
            color: 'white',
            weight: 8,
            opacity: 0.9,
            lineCap: 'round',
            lineJoin: 'round'
        }).addTo(map);

        // Blue dash line
        const routeLine = L.polyline(routePoints, {
            color: '#2563EB',
            weight: 4,
            dashArray: '10, 10',
            lineCap: 'round',
            lineJoin: 'round'
        }).addTo(map);

        map.fitBounds(routeLine.getBounds(), { padding: [50, 50] });

        // --- GEOLOCATION FUNCTION ---
        function locateUser() {
            if (!navigator.geolocation) {
                alert("Geolocation is not supported by your browser.");
                return;
            }

            const btn = event.target.closest('button');
            const originalText = btn.innerHTML;
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Locating...';

            navigator.geolocation.getCurrentPosition(
                (pos) => {
                    const { latitude, longitude, accuracy } = pos.coords;

                    // Remove old marker
                    map.eachLayer((layer) => {
                        if (layer.options.className === 'user-location-wrapper') map.removeLayer(layer);
                    });

                    const userIcon = L.divIcon({
                        className: 'user-location-wrapper',
                        html: '<div class="user-location-marker"></div>',
                        iconSize: [20, 20],
                        iconAnchor: [10, 10]
                    });

                    L.marker([latitude, longitude], { icon: userIcon }).addTo(map);
                    L.circle([latitude, longitude], { radius: accuracy, weight: 1, fillOpacity: 0.1 }).addTo(map);
                    map.flyTo([latitude, longitude], 18);

                    btn.innerHTML = originalText;
                },
                (err) => {
                    alert("Error finding location: " + err.message);
                    btn.innerHTML = originalText;
                },
                { enableHighAccuracy: true }
            );
        }
    </script>
</body>

</html>